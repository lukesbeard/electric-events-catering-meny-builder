<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Electric Events - Event Booking</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
    <style>
        /* Custom styles for the booking form */
        .venue-photo img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        
        /* Venue photo gallery styles */
        .venue-photo-gallery {
            position: relative;
            height: 200px;
            overflow: hidden;
            background-color: #f3f4f6;
            border-radius: 0.375rem;
        }
        
        .venue-photo {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 0.3s ease;
            z-index: 1;
        }
        
        .venue-photo.active {
            opacity: 1;
            z-index: 2;
        }
        
        .gallery-nav {
            position: absolute;
            top: 0;
            bottom: 0;
            width: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: rgba(0, 0, 0, 0.3);
            color: white;
            cursor: pointer;
            opacity: 0;
            transition: opacity 0.2s ease;
            z-index: 5;
        }
        
        .venue-photo-gallery:hover .gallery-nav {
            opacity: 1;
        }
        
        .gallery-nav:hover {
            background-color: rgba(0, 0, 0, 0.5);
        }
        
        .gallery-nav.prev {
            left: 0;
            border-top-left-radius: 0.375rem;
            border-bottom-left-radius: 0.375rem;
        }
        
        .gallery-nav.next {
            right: 0;
            border-top-right-radius: 0.375rem;
            border-bottom-right-radius: 0.375rem;
        }
        
        .gallery-indicators {
            position: absolute;
            bottom: 10px;
            left: 0;
            right: 0;
            display: flex;
            justify-content: center;
            gap: 5px;
            z-index: 5;
        }
        
        .gallery-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.5);
            cursor: pointer;
            transition: background-color 0.2s ease;
        }
        
        .gallery-indicator.active {
            background-color: white;
        }
        
        .step-indicator {
            width: 2rem;
            height: 2rem;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .step-bar {
            height: 4px;
            width: 100%;
        }
        
        .required-field::after {
            content: "*";
            color: #FF4136;
            margin-left: 4px;
            font-weight: bold;
        }

        /* Toggle Switch Styles */
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }

        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }

        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }

        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 16px;
            width: 16px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }

        input:checked + .toggle-slider {
            background-color: #2563EB;
        }

        input:checked + .toggle-slider:before {
            transform: translateX(26px);
        }
        
        /* Full page background system styles */
        .background-container {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: -10;
            overflow: hidden;
        }
        
        .background-item {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            opacity: 0;
            transition: opacity 1.5s ease-in-out;
        }
        
        /* Ensure content is above the background */
        body > * {
            position: relative;
            z-index: 1;
        }
        
        #summary-bar {
            z-index: 10;
        }
        
        main {
            position: relative;
            z-index: 1;
        }
        
        /* Mobile-specific styles */
        @media (max-width: 768px) {
            body {
                padding-top: 20vh;
            }
            
            .background-container {
                height: 100vh;
            }
            
            .background-item {
                object-position: center top;
            }
        }
    </style>
</head>
<body class="bg-black">
    <!-- Background container -->
    <div id="background-container" class="background-container">
    </div>

    <!-- Main Form Section -->
    <main class="container px-4 md:px-6 lg:px-8 py-10 pb-32">
        <div class="max-w-3xl bg-white rounded-lg shadow-lg overflow-hidden">
            <!-- Form Header -->
            <div class="bg-gray-800 text-white p-6">
                <h2 class="text-2xl font-bold mb-2">Event Booking Request</h2>
                <p class="text-gray-300">Fill out the form below to request a booking for your event</p>
            </div>

            <!-- Progress Indicator -->
            <div class="bg-gray-100 px-6 py-4 flex justify-between">
                <div class="flex items-center">
                    <div id="step-1-indicator" class="w-8 h-8 rounded-full bg-blue-600 text-white flex items-center justify-center font-semibold">1</div>
                    <span class="ml-2 font-medium">Contact Info</span>
                </div>
                <div class="flex items-center">
                    <div id="step-2-indicator" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center font-semibold">2</div>
                    <span class="ml-2 font-medium text-gray-600">Plan Your Event</span>
                </div>
                <div class="flex items-center">
                    <div id="step-3-indicator" class="w-8 h-8 rounded-full bg-gray-300 text-gray-600 flex items-center justify-center font-semibold">3</div>
                    <span class="ml-2 font-medium text-gray-600">Services & Preferences</span>
                </div>
            </div>

            <!-- Form -->
            <form id="booking-form" class="p-6">
                <!-- Step 1: Contact Information -->
                <div id="step-1" class="form-section">
                    <h3 class="text-xl font-semibold mb-4 pb-2 border-b border-gray-200">Contact Information</h3>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <!-- Name Fields -->
                        <div>
                            <label for="first-name" class="block text-sm font-medium text-gray-700 mb-1 required-field">First Name</label>
                            <input type="text" id="first-name" name="first-name" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="last-name" class="block text-sm font-medium text-gray-700 mb-1 required-field">Last Name</label>
                            <input type="text" id="last-name" name="last-name" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        
                        <!-- Contact Fields -->
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-700 mb-1 required-field">Email Address</label>
                            <input type="email" id="email" name="email" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                        <div>
                            <label for="phone" class="block text-sm font-medium text-gray-700 mb-1 required-field">Phone Number</label>
                            <input type="tel" id="phone" name="phone" required 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                placeholder="(123) 456-7890">
                        </div>
                    </div>

                    <div class="mb-6">
                        <label for="company" class="block text-sm font-medium text-gray-700 mb-1">Company/Organization (if applicable)</label>
                        <input type="text" id="company" name="company" 
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    
                    <div class="mb-6">
                        <label for="address" class="block text-sm font-medium text-gray-700 mb-1">Address</label>
                        <input type="text" id="address" name="address" 
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 mb-2"
                            placeholder="Street Address">
                        <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                            <input type="text" id="city" name="city" placeholder="City" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <input type="text" id="state" name="state" placeholder="State" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <input type="text" id="zip" name="zip" placeholder="ZIP Code" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <div class="flex justify-between items-center mt-8">
                        <div class="flex items-start">
                            <label class="toggle-switch mt-0.5">
                                <input type="checkbox" id="auto-save" name="auto-save" checked>
                                <span class="toggle-slider"></span>
                            </label>
                            <div class="ml-3">
                                <label for="auto-save" class="text-sm font-medium text-gray-700">Auto save your progress</label>
                                <p class="text-xs text-gray-500">And have the team follow up</p>
                            </div>
                        </div>
                        
                        <button type="button" id="step-1-next" 
                            class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            Next: Event Details →
                        </button>
                    </div>
                </div>

                <!-- Step 2: Event Details -->
                <div id="step-2" class="form-section hidden">
                    <h3 class="text-xl font-semibold mb-4 pb-2 border-b border-gray-200">Event Details</h3>
                    
                    <!-- Event Type Field - Full Width -->
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-2 required-field">Event Type</label>
                        
                        <!-- Hidden input to store selected event type -->
                        <input type="hidden" id="event-type" name="event-type" required>
                        
                        <!-- Event Type Cards -->
                        <div class="grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 mb-3">
                            <!-- Wedding -->
                            <div class="event-type-card cursor-pointer border rounded-lg p-3 hover:border-blue-500 transition-colors" data-value="wedding">
                                <div class="flex items-center mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-blue-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                                            <path d="M12 2a10 10 0 1 0 10 10 4 4 0 0 1-5-5 4 4 0 0 1-5-5"></path>
                                            <path d="M8.5 8.5a2.5 2.5 0 0 0 5 0c0-2-2.5-2-2.5-5 0 3-2.5 3-2.5 5Z"></path>
                                        </svg>
                                    </div>
                                    <div class="ml-3 font-medium">Wedding</div>
                                </div>
                            </div>
                            
                            <!-- Corporate Event -->
                            <div class="event-type-card cursor-pointer border rounded-lg p-3 hover:border-blue-500 transition-colors" data-value="corporate">
                                <div class="flex items-center mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-blue-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                                            <path d="M3 3v18h18"></path>
                                            <path d="M18 9a3 3 0 1 0 0-6 3 3 0 0 0 0 6z"></path>
                                            <path d="M8 12l4-4 2 2 4-4"></path>
                                            <path d="M15 12v6"></path>
                                            <path d="M9 18v-9"></path>
                                            <path d="M9 6v.01"></path>
                                        </svg>
                                    </div>
                                    <div class="ml-3 font-medium">Corporate</div>
                                </div>
                            </div>
                            
                            <!-- Social Gathering -->
                            <div class="event-type-card cursor-pointer border rounded-lg p-3 hover:border-blue-500 transition-colors" data-value="social">
                                <div class="flex items-center mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-blue-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                                            <circle cx="17" cy="5" r="3"></circle>
                                            <circle cx="12" cy="12" r="3"></circle>
                                            <circle cx="5" cy="5" r="3"></circle>
                                            <circle cx="5" cy="19" r="3"></circle>
                                            <path d="M9 10a5 5 0 0 0 8 2"></path>
                                            <path d="M6.7 8a5 5 0 0 0 3.8 7.6"></path>
                                            <path d="M17 19a5 5 0 0 0-8-2"></path>
                                            <path d="M15 14.5a5 5 0 0 0-3.3 5.5"></path>
                                        </svg>
                                    </div>
                                    <div class="ml-3 font-medium">Social</div>
                                </div>
                            </div>
                            
                            <!-- Birthday Party -->
                            <div class="event-type-card cursor-pointer border rounded-lg p-3 hover:border-blue-500 transition-colors" data-value="birthday">
                                <div class="flex items-center mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-blue-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                                            <path d="M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a5 5 0 0 1-4.2-2.3L8 3"></path>
                                            <path d="M19 16v1a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V7a2 2 0 0 1 2-2h9.5"></path>
                                            <path d="M12 13v-2"></path>
                                            <path d="M9 13h6"></path>
                                            <path d="M9 17h6"></path>
                                        </svg>
                                    </div>
                                    <div class="ml-3 font-medium">Birthday</div>
                                </div>
                            </div>
                            
                            <!-- Holiday Party -->
                            <div class="event-type-card cursor-pointer border rounded-lg p-3 hover:border-blue-500 transition-colors" data-value="holiday">
                                <div class="flex items-center mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-blue-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                                            <path d="M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3"></path>
                                            <path d="M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z"></path>
                                            <path d="M5 14h14"></path>
                                            <path d="M9 16v4"></path>
                                            <path d="M15 16v4"></path>
                                        </svg>
                                    </div>
                                    <div class="ml-3 font-medium">Holiday</div>
                                </div>
                            </div>
                            
                            <!-- Fundraiser -->
                            <div class="event-type-card cursor-pointer border rounded-lg p-3 hover:border-blue-500 transition-colors" data-value="fundraiser">
                                <div class="flex items-center mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-blue-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                                            <path d="M12 2v20"></path>
                                            <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"></path>
                                        </svg>
                                    </div>
                                    <div class="ml-3 font-medium">Fundraiser</div>
                                </div>
                            </div>
                            
                            <!-- Conference/Meeting -->
                            <div class="event-type-card cursor-pointer border rounded-lg p-3 hover:border-blue-500 transition-colors" data-value="conference">
                                <div class="flex items-center mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-blue-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                                            <path d="M18 8a6 6 0 0 0-6-6 6 6 0 0 0-6 6c0 6 6 10 6 10s6-4 6-10Z"></path>
                                            <circle cx="12" cy="8" r="2"></circle>
                                        </svg>
                                    </div>
                                    <div class="ml-3 font-medium">Conference</div>
                                </div>
                            </div>
                            
                            <!-- Other -->
                            <div class="event-type-card cursor-pointer border rounded-lg p-3 hover:border-blue-500 transition-colors" data-value="other">
                                <div class="flex items-center mb-2">
                                    <div class="flex-shrink-0 w-8 h-8 flex items-center justify-center text-blue-600">
                                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-6 h-6">
                                            <circle cx="12" cy="12" r="10"></circle>
                                            <path d="M12 16v-4"></path>
                                            <path d="M12 8h.01"></path>
                                        </svg>
                                    </div>
                                    <div class="ml-3 font-medium">Other</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Other Event Type Field - Shown conditionally -->
                        <div id="other-event-type-container" class="hidden mt-3">
                            <label for="other-event-type" class="block text-sm font-medium text-gray-700 mb-1">Please specify</label>
                            <input type="text" id="other-event-type" name="other-event-type" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <!-- Event Details Row (Name, Date, Time, Flexible) -->
                    <div class="grid grid-cols-12 gap-3 mb-6">
                        <!-- Event Name Field - Takes up 5/12 columns (less wide) -->
                        <div class="col-span-5">
                            <label for="event-name" class="block text-sm font-medium text-gray-700 mb-1">Event Name</label>
                            <input type="text" id="event-name" name="event-name" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                                placeholder="e.g. Smith-Johnson Wedding">
                        </div>
                        
                        <!-- Event Date - Takes up 2/12 of row -->
                        <div class="col-span-2">
                            <label for="event-date" class="block text-sm font-medium text-gray-700 mb-1 required-field">Event Date</label>
                            <input type="text" id="event-date" name="event-date" placeholder="Select date" required
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 datepicker">
                        </div>
                        
                        <!-- Start Time - Takes up 2/12 of row -->
                        <div class="col-span-2">
                            <label for="start-time" class="block text-sm font-medium text-gray-700 mb-1 required-field">Start Time</label>
                            <input type="text" id="start-time" name="start-time" placeholder="Select time" required
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 timepicker">
                        </div>
                        
                        <!-- Flexible dates option - now in its own column (3/12) -->
                        <div class="col-span-3">
                            <label class="invisible block text-sm font-medium text-gray-700 mb-1">Placeholder</label>
                            <div class="flex items-center h-[42px]">
                                <label class="toggle-switch my-auto">
                                    <input type="checkbox" id="flexible-dates" name="flexible-dates">
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="ml-3">
                                    <label for="flexible-dates" class="text-sm font-medium text-gray-700">Flexible on dates</label>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Event Length Row -->
                    <div class="mb-6">
                        <label for="event-length" class="block text-sm font-medium text-gray-700 mb-1">Event Length (in hours)</label>
                        <div class="space-y-2">
                            <div class="flex space-x-2">
                                <button type="button" class="event-length-btn flex-1 py-1 px-2 bg-gray-100 text-gray-700 rounded border border-gray-300 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" data-hours="1">1</button>
                                <button type="button" class="event-length-btn flex-1 py-1 px-2 bg-gray-100 text-gray-700 rounded border border-gray-300 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" data-hours="2">2</button>
                                <button type="button" class="event-length-btn flex-1 py-1 px-2 bg-gray-100 text-gray-700 rounded border border-gray-300 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" data-hours="3">3</button>
                                <button type="button" class="event-length-btn flex-1 py-1 px-2 bg-gray-100 text-gray-700 rounded border border-gray-300 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-blue-500" data-hours="4">4</button>
                            </div>
                            <select id="event-length" name="event-length" class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                                <option value="">Custom length...</option>
                                <option value="1">1 hour</option>
                                <option value="2">2 hours</option>
                                <option value="3">3 hours</option>
                                <option value="4">4 hours</option>
                                <option value="5">5 hours</option>
                                <option value="6">6 hours</option>
                                <option value="7">7 hours</option>
                                <option value="8">8 hours</option>
                                <option value="9">9 hours</option>
                                <option value="10">10 hours</option>
                            </select>
                            <input type="hidden" id="event-length-value" name="event-length-value" value="">
                        </div>
                    </div>

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                        <div>
                            <label for="guest-count-slider" class="block text-sm font-medium text-gray-700 mb-1 required-field">Estimated Guest Count</label>
                            <div class="mt-1 mb-2">
                                <div id="guest-count-display" class="text-lg font-semibold text-blue-600">50 Guests</div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-xs text-gray-500">50</span>
                                <input 
                                    type="range" 
                                    id="guest-count-slider" 
                                    name="guest-count" 
                                    min="50" 
                                    max="500" 
                                    step="10" 
                                    value="50"
                                    required
                                    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                                >
                                <span class="text-xs text-gray-500">500+</span>
                            </div>
                            <div class="flex justify-between px-1 mt-1">
                                <span class="text-xs text-gray-500">Smaller</span>
                                <span class="text-xs text-gray-500">Larger</span>
                            </div>
                        </div>
                        <div>
                            <label for="budget-slider" class="block text-sm font-medium text-gray-700 mb-1">Approximate Budget (per person)</label>
                            <div class="mt-1 mb-2">
                                <div id="budget-display" class="text-lg font-semibold text-blue-600">$50 per person</div>
                            </div>
                            <div class="flex items-center space-x-3">
                                <span class="text-xs text-gray-500">$15</span>
                                <input 
                                    type="range" 
                                    id="budget-slider" 
                                    name="budget" 
                                    min="15" 
                                    max="500" 
                                    step="5" 
                                    value="50"
                                    class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-blue-600"
                                >
                                <span class="text-xs text-gray-500">$500+</span>
                            </div>
                            <div class="flex justify-between px-1 mt-1">
                                <span class="text-xs text-gray-500">Lower</span>
                                <span class="text-xs text-gray-500">Higher</span>
                            </div>
                        </div>
                    </div>

                    <!-- Estimated Total Cost Row -->
                    <div class="mb-6 bg-gray-50 p-4 rounded-lg border border-gray-200">
                        <div class="flex justify-between items-center">
                            <div>
                                <span class="text-sm font-medium text-gray-700 bold">Estimated Total Cost:</span>
                                <span class="ml-1 text-xs text-gray-500">based on guest count × per-person budget, price not guaranteed</span>
                            </div>
                            <div id="total-cost-display" class="text-xl font-bold text-blue-700">$2,500</div>
                        </div>
                    </div>

                    <div class="mb-6">
                       
                        
                        <!-- Electric Events Venues -->
                        <div id="electric-venues-container">
                            <p class="block text-sm font-medium text-gray-700 mb-3">Select from our premier venues:</p>
                            
                            <div id="venue-cards-container" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                                <!-- Venue cards will be populated via JavaScript -->
                            </div>
                            
                            <div id="selected-venue-section" class="hidden mt-4 border-t border-gray-200 pt-4">
                                <p class="text-sm font-medium text-gray-700 mb-2">Selected Venue:</p>
                                <div id="selected-venue-details" class="bg-blue-50 rounded-md p-4 border border-blue-200"></div>
                            </div>
                        </div>
                        
                       
                    </div>

                    <div class="flex justify-between mt-8">
                        <button type="button" id="step-2-prev" 
                            class="px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">
                            ← Back to Contact Info
                        </button>
                        <button type="button" id="step-2-next" 
                            class="px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
                            Next: Services & Preferences →
                        </button>
                    </div>
                </div>

                <!-- Step 3: Services & Preferences -->
                <div id="step-3" class="form-section hidden">
                    <h3 class="text-xl font-semibold mb-4 pb-2 border-b border-gray-200">Services & Preferences</h3>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-3">Which services are you interested in? (Select all that apply)</label>
                        
                        <!-- Select All option -->
                        <div class="flex items-start mb-4 pb-3 border-b border-gray-100">
                            <label class="toggle-switch mt-0.5">
                                <input type="checkbox" id="select-all-services">
                                <span class="toggle-slider"></span>
                            </label>
                            <div class="ml-3">
                                <label for="select-all-services" class="font-medium text-gray-700">Select All Services</label>
                                <p class="text-gray-500 text-sm">You want it all? Nice.</p>
                            </div>
                        </div>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="service-catering" name="services[]" value="catering" class="service-checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="ml-3">
                                    <label for="service-catering" class="font-medium text-gray-700">Catering</label>
                                    <p class="text-gray-500 text-sm">Full-service food & beverage</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="service-bar" name="services[]" value="bar" class="service-checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="ml-3">
                                    <label for="service-bar" class="font-medium text-gray-700">Bar Service</label>
                                    <p class="text-gray-500 text-sm">Bartenders & beverage packages</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="service-staffing" name="services[]" value="staffing" class="service-checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="ml-3">
                                    <label for="service-staffing" class="font-medium text-gray-700">Event Staffing</label>
                                    <p class="text-gray-500 text-sm">Servers, bussers & coat check</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="service-planning" name="services[]" value="planning" class="service-checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="ml-3">
                                    <label for="service-planning" class="font-medium text-gray-700">Event Planning</label>
                                    <p class="text-gray-500 text-sm">Full or partial planning services</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="service-decor" name="services[]" value="decor" class="service-checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="ml-3">
                                    <label for="service-decor" class="font-medium text-gray-700">Decor & Styling</label>
                                    <p class="text-gray-500 text-sm">Event design & decoration</p>
                                </div>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="service-rentals" name="services[]" value="rentals" class="service-checkbox">
                                    <span class="toggle-slider"></span>
                                </label>
                                <div class="ml-3">
                                    <label for="service-rentals" class="font-medium text-gray-700">Equipment Rentals</label>
                                    <p class="text-gray-500 text-sm">Tables, chairs, linens, etc.</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="mb-6">
                        <label for="dietary-restrictions" class="block text-sm font-medium text-gray-700 mb-1">Dietary Restrictions or Special Considerations</label>
                        <textarea id="dietary-restrictions" name="dietary-restrictions" rows="3"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="Please list any allergies, vegetarian/vegan requirements, or other dietary needs"></textarea>
                    </div>

                    <div class="mb-6">
                        <label for="additional-info" class="block text-sm font-medium text-gray-700 mb-1">Additional Information or Special Requests</label>
                        <textarea id="additional-info" name="additional-info" rows="5"
                            class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="Please share any other details about your event vision, special requests, or questions"></textarea>
                    </div>

                    <div class="mb-6">
                        <label class="block text-sm font-medium text-gray-700 mb-3">How did you hear about us?</label>
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-3">
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="heard-search" name="heard-about[]" value="search">
                                    <span class="toggle-slider"></span>
                                </label>
                                <label for="heard-search" class="ml-3 text-sm text-gray-700">
                                    Search Engine
                                </label>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="heard-social" name="heard-about[]" value="social">
                                    <span class="toggle-slider"></span>
                                </label>
                                <label for="heard-social" class="ml-3 text-sm text-gray-700">
                                    Social Media
                                </label>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="heard-referral" name="heard-about[]" value="referral">
                                    <span class="toggle-slider"></span>
                                </label>
                                <label for="heard-referral" class="ml-3 text-sm text-gray-700">
                                    Friend/Family Referral
                                </label>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="heard-event" name="heard-about[]" value="event">
                                    <span class="toggle-slider"></span>
                                </label>
                                <label for="heard-event" class="ml-3 text-sm text-gray-700">
                                    Past Event
                                </label>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="heard-website" name="heard-about[]" value="website">
                                    <span class="toggle-slider"></span>
                                </label>
                                <label for="heard-website" class="ml-3 text-sm text-gray-700">
                                    Our Website
                                </label>
                            </div>
                            
                            <div class="flex items-start">
                                <label class="toggle-switch mt-0.5">
                                    <input type="checkbox" id="heard-other" name="heard-about[]" value="other">
                                    <span class="toggle-slider"></span>
                                </label>
                                <label for="heard-other" class="ml-3 text-sm text-gray-700">
                                    Other
                                </label>
                            </div>
                        </div>
                        <div id="heard-other-container" class="hidden mt-3">
                            <label for="heard-other-text" class="block text-sm font-medium text-gray-700 mb-1">Please specify</label>
                            <input type="text" id="heard-other-text" name="heard-other-text" 
                                class="w-full px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500">
                        </div>
                    </div>

                    <!-- Enhanced terms agreement section -->
                    <div class="mb-6 bg-blue-50 border border-blue-200 rounded-lg p-5">
                        <h4 class="text-lg font-semibold text-gray-800 mb-3">Before you submit, please note:</h4>
                        <div class="flex items-start">
                            <label class="toggle-switch mt-0.5">
                                <input type="checkbox" id="terms-agreement" name="terms-agreement" required>
                                <span class="toggle-slider"></span>
                            </label>
                            <label for="terms-agreement" class="ml-3 text-sm text-gray-700">
                                I understand this is an inquiry form and does not constitute a booking confirmation. A representative will contact me to discuss availability and details.
                            </label>
                        </div>
                    </div>

                    <div class="flex justify-between mt-8">
                        <button type="button" id="step-3-prev" 
                            class="px-6 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-2">
                            ← Back to Event Details
                        </button>
                        <button type="submit" id="submit-form" 
                            class="px-8 py-3 bg-blue-600 text-white font-medium rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 flex items-center">
                            <span>Submit Booking Request</span>
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 ml-2" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10.293 5.293a1 1 0 011.414 0l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414-1.414L12.586 11H5a1 1 0 110-2h7.586l-2.293-2.293a1 1 0 010-1.414z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>
            </form>
        </div>
    </main>

    <!-- Summary Bar -->
    <div id="summary-bar" class="fixed bottom-0 left-0 right-0 bg-white bg-opacity-95 border-t border-gray-200 shadow-lg py-3 px-4">
        <div class="container px-5  max-w-2xl">
            <div>
                <h3 class="text-sm font-medium text-gray-500 mb-1">Event Summary</h3>
                <div id="summary-content" class="text-gray-800">
                    <p id="summary-organizer" class="hidden"><span class="font-medium"></span>'s event</p>
                    <p id="summary-event-details" class="hidden"><span class="event-type"></span><span class="event-name"></span></p>
                    <p id="summary-datetime" class="hidden">On <span class="event-date"></span> at <span class="start-time"></span> for <span class="event-duration"></span></p>
                    <p id="summary-guests-venue" class="hidden"><span class="guest-count"></span> at <span class="venue-name"></span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- JavaScript for form functionality -->
    <script>
        // Venue configuration data
        const venueData = {
            "electric-room": {
                name: "The Electric Room",
                location: "West Midtown",
                address: "Star Metal Building, Atlanta, GA",
                capacity: {
                    max: 250,
                    seated: 200,
                    standing: 250
                },
                description: "A private floor in West Midtown's Star Metal's building, where elegant interiors lead to the rooftop terrace's stunning views of the Atlanta skyline.",
                socialHandle: "@electricroomatl",
                website: "https://www.electriceventsatl.com/the-electric-room",
                photos: [
                    "assets/venues/electricroom-feature-photo-1.png",
                     "assets/venues/Venue-ER-1.png",
                     "assets/venues/Venue-ER-2.png",      
                    
                ],
                features: ["Rooftop Terrace", "Skyline Views", "Elegant Interiors", "Private Floor"],
                amenities: ["Bar Service", "AV Equipment", "Climate Control", "Restrooms", "Coat Check"],
                minGuestCount: 50
            },
            "ladybird": {
                name: "Ladybird Grove & Mess Hall",
                location: "Old Fourth Ward",
                address: "Eastside Beltline, Atlanta, GA",
                capacity: {
                    max: 500,
                    seated: 300,
                    standing: 500
                },
                description: "Located in Atlanta's historic Old Fourth Ward, Ladybird Grove & Mess Hall is a National Park-inspired destination overlooking the Eastside Beltline featuring multiple bars, 300+ seats indoors and outdoors, and a beloved patio.",
                socialHandle: "@ladybirdatlanta",
                website: "https://www.electriceventsatl.com/ladybird",
                photos: [
                    "assets/venues/ladybird-feature-photo-1.png",
                    "assets/venues/Venue-LB-1.png",
                    "assets/venues/Venue-LB-2.png",
                    "assets/venues/Venue-LB-3.png",   
                ],
                features: ["Beltline Views", "Outdoor Patio", "Multiple Bars", "Indoor/Outdoor Space"],
                amenities: ["Full Catering", "Bar Service", "AV Equipment", "Restrooms", "Parking Nearby"],
                minGuestCount: 25
            },
            "ranger-station": {
                name: "Ranger Station",
                location: "Old Fourth Ward",
                address: "Above Ladybird Grove & Mess Hall, Atlanta, GA",
                capacity: {
                    max: 80,
                    seated: 65,
                    standing: 80
                },
                description: "Ranger Station is a new, rangers-only hidden cocktail bar tucked away in a den above Ladybird Grove & Mess Hall, where it's been perched for what feels like forever.",
                socialHandle: "@rangerstationatl",
                website: "https://www.electriceventsatl.com/ranger-station",
                photos: [
                    "assets/venues/rangerstation-feature-photo-1.png"
                ],
                features: ["Hidden Cocktail Bar", "Intimate Setting", "Above Ladybird", "Exclusive Space"],
                amenities: ["Craft Cocktails", "Catering Available", "Private Bar", "Relaxed Atmosphere"],
                minGuestCount: 10
            },
            "strangers-in-paradise": {
                name: "Strangers in Paradise",
                location: "West End",
                address: "1020 White Street, Suite B-1, Atlanta, GA 30310",
                capacity: {
                    max: 150,
                    seated: 100,
                    standing: 150
                },
                description: "\"No matter how much things change, the more they stay the same.\" - Bev (bar owner). Paradise is a State of Mind.",
                socialHandle: "@StrangersInParadiseAtl",
                website: "https://www.strangersinparadiseatl.com/",
                photos: [
                    "assets/venues/strangersinparadise-feature-photo-1.png"
                ],
                features: ["Tropical Vibes", "Unique Atmosphere", "Lively Setting", "Beautiful Decor"],
                amenities: ["Full Bar", "Catering Options", "Music Setup", "Outdoor Area"],
                minGuestCount: 20
            },
            "tiger-sun": {
                name: "Tiger Sun",
                location: "Reynoldstown",
                address: "904 Memorial Dr SE, Atlanta, GA 30316",
                capacity: {
                    max: 120,
                    seated: 80,
                    standing: 120
                },
                description: "The way of the tiger awaits. A unique venue with distinctive character and atmosphere.",
                socialHandle: "@tigersunatl",
                website: "https://www.tigersunatl.com/",
                photos: [
                    "assets/venues/tigersun-feature-photo-1.png",
                    "assets/venues/Venue-TS-1.jpg", 
                    "assets/venues/Venue-TS-2.jpg",
                    "assets/venues/Venue-TS-3.jpg",
                    
                ],
                features: ["Distinctive Design", "Intimate Setting", "Unique Atmosphere", "Central Location"],
                amenities: ["Full Bar", "Special Menu Options", "Music Setup", "Themed Experience"],
                minGuestCount: 15
            },
            "muchacho": {
                name: "Muchacho",
                location: "Reynoldstown",
                address: "904 Memorial Dr SE, Atlanta, GA 30316",
                capacity: {
                    max: 100,
                    seated: 70,
                    standing: 100
                },
                description: "A bright and vibrant venue with a unique atmosphere perfect for social gatherings and celebrations.",
                socialHandle: "@muchacho",
                website: "https://www.muchachoatl.com/",
                photos: [
                    "assets/venues/muchacho-feature-photo-1.png",
                    "assets/venues/Venue-M-1.png",   
                    "assets/venues/Venue-M-2.png",
                    "assets/venues/Venue-M-3.png",      
                ],
                features: ["Vibrant Space", "Unique Design", "Central Location", "Casual Atmosphere"],
                amenities: ["Full Bar", "Catering Options", "Music Setup", "Indoor/Outdoor Space"],
                minGuestCount: 15
            }
        };

        // Global variables to track venue selection
        let selectedVenueKey = null;
        let selectedVenueName = null;
        
        // Background system variables
        let currentBackgroundIndex = 0;
        let backgroundItems = [];
        let backgroundTimer = null;
        let isVideoPlaying = false;

        // Initialize date and time pickers
        document.addEventListener('DOMContentLoaded', function() {
            // Date picker
            flatpickr('.datepicker', {
                minDate: "today",
                dateFormat: "Y-m-d",
            });
            
            // Time picker
            flatpickr('.timepicker', {
                enableTime: true,
                noCalendar: true,
                dateFormat: "h:i K",
            });

            // Process venue data to filter out non-existent images
            processVenuePhotos();

            // Form navigation
            const step1 = document.getElementById('step-1');
            const step2 = document.getElementById('step-2');
            const step3 = document.getElementById('step-3');
            
            const step1Indicator = document.getElementById('step-1-indicator');
            const step2Indicator = document.getElementById('step-2-indicator');
            const step3Indicator = document.getElementById('step-3-indicator');
            
            // Step 1 to Step 2
            document.getElementById('step-1-next').addEventListener('click', function() {
                // Remove validation requirement to allow free navigation
                step1.classList.add('hidden');
                step2.classList.remove('hidden');
                
                step1Indicator.classList.remove('bg-blue-600', 'text-white');
                step1Indicator.classList.add('bg-green-500', 'text-white');
                step2Indicator.classList.remove('bg-gray-300', 'text-gray-600');
                step2Indicator.classList.add('bg-blue-600', 'text-white');
                
                // Smooth scroll to top of form
                document.querySelector('main').scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
            
            // Step 2 to Step 1
            document.getElementById('step-2-prev').addEventListener('click', function() {
                step2.classList.add('hidden');
                step1.classList.remove('hidden');
                
                step2Indicator.classList.remove('bg-blue-600', 'text-white');
                step2Indicator.classList.add('bg-gray-300', 'text-gray-600');
                step1Indicator.classList.remove('bg-green-500');
                step1Indicator.classList.add('bg-blue-600');
                
                // Smooth scroll to top of form
                document.querySelector('main').scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
            
            // Step 2 to Step 3
            document.getElementById('step-2-next').addEventListener('click', function() {
                // Remove validation requirement to allow free navigation
                step2.classList.add('hidden');
                step3.classList.remove('hidden');
                
                step2Indicator.classList.remove('bg-blue-600');
                step2Indicator.classList.add('bg-green-500');
                step3Indicator.classList.remove('bg-gray-300', 'text-gray-600');
                step3Indicator.classList.add('bg-blue-600', 'text-white');
                
                // Smooth scroll to top of form
                document.querySelector('main').scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
            
            // Step 3 to Step 2
            document.getElementById('step-3-prev').addEventListener('click', function() {
                step3.classList.add('hidden');
                step2.classList.remove('hidden');
                
                step3Indicator.classList.remove('bg-blue-600', 'text-white');
                step3Indicator.classList.add('bg-gray-300', 'text-gray-600');
                step2Indicator.classList.remove('bg-green-500');
                step2Indicator.classList.add('bg-blue-600');
                
                // Smooth scroll to top of form
                document.querySelector('main').scrollIntoView({ behavior: 'smooth', block: 'start' });
            });
            
            // Show/hide "Other event type" field
            document.getElementById('event-type').addEventListener('change', function() {
                const otherContainer = document.getElementById('other-event-type-container');
                if (this.value === 'other') {
                    otherContainer.classList.remove('hidden');
                } else {
                    otherContainer.classList.add('hidden');
                }
            });
            
            // Show/hide "Other heard about" field
            const heardOtherCheckbox = document.getElementById('heard-other');
            const heardOtherContainer = document.getElementById('heard-other-container');
            
            if (heardOtherCheckbox && heardOtherContainer) {
                heardOtherCheckbox.addEventListener('change', function() {
                    if (this.checked) {
                        heardOtherContainer.classList.remove('hidden');
                    } else {
                        heardOtherContainer.classList.add('hidden');
                    }
                });
            }
            
            // Venue card display and selection functionality
            const venueCardsContainer = document.getElementById('venue-cards-container');
            const selectedVenueSection = document.getElementById('selected-venue-section');
            const selectedVenueDetails = document.getElementById('selected-venue-details');
            
            // Track the selected venue
            let selectedVenueKey = null;
            
            // Create venue cards
            if (venueCardsContainer) {
                // Create and append venue cards
                Object.keys(venueData).forEach(venueKey => {
                    const venue = venueData[venueKey];
                    
                    // Create venue card element
                    const venueCard = document.createElement('div');
                    venueCard.className = 'border rounded-lg overflow-hidden shadow-sm hover:shadow-md transition-shadow';
                    venueCard.dataset.venueKey = venueKey;
                    
                    // Create card content
                    venueCard.innerHTML = `
                        <div class="venue-card${venueKey === selectedVenueKey ? ' border-2 border-blue-500' : ''}">
                            <div class="bg-gray-50 px-4 py-3 border-b border-gray-200">
                                <h4 class="font-semibold text-lg">${venue.name}</h4>
                                <p class="text-xs text-gray-500">${venue.location}</p>
                            </div>
                            
                            <!-- Photo Gallery -->
                            <div class="venue-photo-gallery" data-venue="${venueKey}">
                                ${venue.photos.map((photo, index) => `
                                    <div class="venue-photo ${index === 0 ? 'active' : ''}" data-index="${index}">
                                        <img src="${photo}" alt="${venue.name} photo ${index + 1}">
                                    </div>
                                `).join('')}
                                
                                ${venue.photos.length > 1 ? `
                                    <div class="gallery-nav prev" data-action="prev">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                                        </svg>
                                    </div>
                                    <div class="gallery-nav next" data-action="next">
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                        </svg>
                                    </div>
                                    <div class="gallery-indicators">
                                        ${venue.photos.map((_, index) => `
                                            <div class="gallery-indicator ${index === 0 ? 'active' : ''}" data-index="${index}"></div>
                                        `).join('')}
                                    </div>
                                ` : ''}
                            </div>
                            
                            <div class="p-4">
                                <p class="text-sm text-gray-600 mb-3 line-clamp-3" style="overflow: hidden; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical;">${venue.description}</p>
                                <div class="text-sm">
                                    <p><span class="font-medium">Capacity:</span> <span class="venue-capacity-info">${venue.capacity.max} (${venue.capacity.seated} seated)</span></p>
                                    <p class="mt-1"><span class="font-medium">Recommended for:</span> ${venue.minGuestCount}+ guests</p>
                                </div>
                                <div class="mt-3">
                                    <p class="text-sm font-medium">Top Features:</p>
                                    <div class="flex flex-wrap gap-1 mt-1">
                                        ${venue.features.slice(0, 3).map(feature => 
                                            `<span class="text-xs bg-gray-100 text-gray-800 px-2 py-1 rounded">${feature}</span>`
                                        ).join('')}
                                    </div>
                                </div>
                                <div class="mt-4 flex justify-between items-center">
                                    <button type="button" class="more-details-btn px-3 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-1" onclick="openModal('${venue.website}', '${venue.name}')">
                                        View Website
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                                        </svg>
                                    </button>
                                    <button type="button" class="select-venue-btn px-3 py-1.5 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1">
                                        Select Venue
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                    
                    // Add to container
                    venueCardsContainer.appendChild(venueCard);
                    
                    // Add click handler to the select button
                    const selectButton = venueCard.querySelector('.select-venue-btn');
                    selectButton.addEventListener('click', function(e) {
                        e.preventDefault();
                        selectVenue(venueKey);
                    });
                });
                
                // Initialize photo gallery navigation for all venue cards
                initPhotoGalleries();
                
                // Function to handle venue selection
                function selectVenue(venueKey) {
                    const venue = venueData[venueKey];
                    if (!venue) return;
                    
                    // Update selected venue variables
                    selectedVenueKey = venueKey;
                    selectedVenueName = venue.name;
                    
                    console.log("Venue selected:", selectedVenueName, "Key:", selectedVenueKey);
                    
                    // Update UI to show selection
                    document.querySelectorAll('.venue-card').forEach(card => {
                        card.classList.remove('border-2', 'border-blue-500');
                    });
                    
                    // Reset all select buttons
                    document.querySelectorAll('.select-venue-btn').forEach(btn => {
                        btn.innerHTML = 'Select Venue';
                        btn.classList.remove('bg-green-600', 'hover:bg-green-700');
                        btn.classList.add('bg-blue-600', 'hover:bg-blue-700');
                    });
                    
                    const selectedCard = document.querySelector(`[data-venue-key="${venueKey}"] .venue-card`);
                    if (selectedCard) {
                        selectedCard.classList.add('border-2', 'border-blue-500');
                        
                        // Update the button text for the selected venue
                        const button = selectedCard.querySelector('.select-venue-btn');
                        if (button) {
                            button.innerHTML = 'Selected Venue';
                            button.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                            button.classList.add('bg-green-600', 'hover:bg-green-700');
                        }
                    }
                    
                    // Show selected venue section
                    selectedVenueSection.classList.remove('hidden');
                    
                    // Update the hidden form field for the selected venue
                    const venueInput = document.createElement('input');
                    venueInput.type = 'hidden';
                    venueInput.name = 'selected-venue';
                    venueInput.value = venueKey;
                    
                    // Remove any existing venue inputs
                    const existingInput = document.querySelector('input[name="selected-venue"]');
                    if (existingInput) {
                        existingInput.remove();
                    }
                    
                    // Add the new input
                    document.getElementById('booking-form').appendChild(venueInput);
                    
                    // CRITICAL: Direct update to summary bar
                    const summaryVenueElement = document.querySelector('#summary-guests-venue .venue-name');
                    if (summaryVenueElement) {
                        summaryVenueElement.textContent = venue.name;
                        console.log("DIRECT UPDATE to summary bar:", venue.name);
                        
                        // Ensure the guest-venue section is visible if we have guests
                        const guestCount = document.getElementById('guest-count-slider')?.value;
                        if (guestCount && document.getElementById('summary-guests-venue').classList.contains('hidden')) {
                            document.getElementById('summary-guests-venue').classList.remove('hidden');
                        }
                    }
                    
                    // Update the background system with the selected venue's photos
                    updateBackgroundSystem();
                    
                    // Populate selected venue details
                    let detailsHtml = `
                        <div class="flex justify-between items-start">
                            <div>
                                <h4 class="font-semibold text-lg">${venue.name}</h4>
                                <p class="text-sm text-gray-600">${venue.location}</p>
                            </div>
                            <span class="bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-medium">Selected</span>
                        </div>
                        
                        <!-- Photo Gallery in Selected Venue -->
                        <div class="venue-photo-gallery mt-3" data-venue="${venueKey}">
                            ${venue.photos.map((photo, index) => `
                                <div class="venue-photo ${index === 0 ? 'active' : ''}" data-index="${index}">
                                    <img src="${photo}" alt="${venue.name} photo ${index + 1}">
                                </div>
                            `).join('')}
                            
                            ${venue.photos.length > 1 ? `
                                <div class="gallery-nav prev" data-action="prev">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <div class="gallery-nav next" data-action="next">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                        <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                                    </svg>
                                </div>
                                <div class="gallery-indicators">
                                    ${venue.photos.map((_, index) => `
                                        <div class="gallery-indicator ${index === 0 ? 'active' : ''}" data-index="${index}"></div>
                                    `).join('')}
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="mt-3 text-sm">
                            <p><span class="font-medium">Address:</span> ${venue.address}</p>
                            <p><span class="font-medium">Capacity:</span> ${venue.capacity.max} people (${venue.capacity.seated} seated)</p>
                            <p class="mt-2 text-blue-700">This venue has been selected for your event.</p>
                            <button type="button" class="mt-2 px-3 py-1.5 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 focus:outline-none focus:ring-2 focus:ring-gray-500 focus:ring-offset-1" onclick="openModal('${venue.website}', '${venue.name}')">
                                View Website
                                <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 inline-block ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                                </svg>
                            </button>
                        </div>
                    `;
                    
                    selectedVenueDetails.innerHTML = detailsHtml;
                    
                    // Initialize the photo gallery in the selected venue details
                    initPhotoGalleries();
                    
                    // Scroll to the selected venue section
                    selectedVenueSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
                    
                    // Force an update of the summary
                    updateSummary();
                }
            }
            
            // External venue checkbox handler
            const externalVenueCheckbox = document.getElementById('using-external-venue');
            const externalVenueContainer = document.getElementById('external-venue-container');
            
            if (externalVenueCheckbox && externalVenueContainer) {
                externalVenueCheckbox.addEventListener('change', function() {
                    if (this.checked) {
                        externalVenueContainer.classList.remove('hidden');
                        
                        // If using external venue, clear venue selection
                        document.querySelectorAll('.venue-card').forEach(card => {
                            card.classList.remove('border-2', 'border-blue-500');
                        });
                        
                        // Hide selected venue confirmation
                        const selectedVenueSection = document.getElementById('selected-venue-section');
                        if (selectedVenueSection) {
                            selectedVenueSection.classList.add('hidden');
                        }
                        
                        // Remove selected venue input
                        const venueInput = document.querySelector('input[name="selected-venue"]');
                        if (venueInput) {
                            venueInput.remove();
                        }
                        
                        // Update tracked selection
                        selectedVenueKey = null;
                        
                        // Clear the background system when using external venue
                        clearBackgroundSystem();
                    } else {
                        externalVenueContainer.classList.add('hidden');
                    }
                });
            }
            
            // Update venue selection to clear external venue when selecting Electric venue
            if (venueCardsContainer) {
                // Add to the selectVenue function to handle external venue checkbox
                const originalSelectVenue = selectVenue;
                selectVenue = function(venueKey) {
                    // Call the original function
                    originalSelectVenue(venueKey);
                    
                    // Uncheck external venue checkbox
                    if (externalVenueCheckbox && externalVenueCheckbox.checked) {
                        externalVenueCheckbox.checked = false;
                        externalVenueContainer.classList.add('hidden');
                    }
                };
            }
            
            // Guest count slider functionality
            const guestCountSlider = document.getElementById('guest-count-slider');
            const guestCountDisplay = document.getElementById('guest-count-display');
            
            if (guestCountSlider && guestCountDisplay) {
                // Initialize with the default value
                updateGuestCountDisplay(guestCountSlider.value);
                checkVenueCapacities(guestCountSlider.value);
                
                // Update when the slider is moved
                guestCountSlider.addEventListener('input', function() {
                    updateGuestCountDisplay(this.value);
                    checkVenueCapacities(this.value);
                    updateTotalCost();
                });
                
                // Function to format and display the guest count
                function updateGuestCountDisplay(value) {
                    const numValue = parseInt(value);
                    const maxValue = parseInt(guestCountSlider.max);
                    const isMaxed = numValue >= maxValue;
                    
                    // Add "+" when at max value
                    guestCountDisplay.textContent = numValue.toLocaleString() + (isMaxed ? '+ Guests' : ' Guests');
                    
                    // Change color based on the value range
                    if (numValue < 100) {
                        guestCountDisplay.className = 'text-lg font-semibold text-green-600';
                    } else if (numValue < 250) {
                        guestCountDisplay.className = 'text-lg font-semibold text-blue-600';
                    } else {
                        guestCountDisplay.className = 'text-lg font-semibold text-purple-600';
                    }
                }
                
                // Function to check venue capacities against current guest count
                function checkVenueCapacities(guestCount) {
                    const guestValue = parseInt(guestCount);
                    const maxValue = parseInt(guestCountSlider.max);
                    const isMaxed = guestValue >= maxValue;
                    
                    // Check each venue card
                    document.querySelectorAll('[data-venue-key]').forEach(venueCard => {
                        const venueKey = venueCard.dataset.venueKey;
                        const venue = venueData[venueKey];
                        
                        if (!venue) return;
                        
                        const selectButton = venueCard.querySelector('.select-venue-btn');
                        const capacityInfo = venueCard.querySelector('.venue-capacity-info');
                        
                        // Check if guest count exceeds venue capacity
                        if (guestValue > venue.capacity.max) {
                            // Disable this venue
                            venueCard.classList.add('opacity-50');
                            if (selectButton) {
                                selectButton.disabled = true;
                                selectButton.classList.remove('bg-blue-600', 'hover:bg-blue-700');
                                selectButton.classList.add('bg-gray-400', 'cursor-not-allowed');
                                selectButton.innerHTML = 'Capacity Exceeded';
                            }
                            
                            // Add a notification if not already present
                            if (!venueCard.querySelector('.capacity-warning')) {
                                const warningEl = document.createElement('div');
                                warningEl.className = 'capacity-warning text-xs bg-red-100 text-red-800 px-2 py-1 mt-2 rounded';
                                warningEl.innerHTML = 'Cannot accommodate ' + guestValue + (isMaxed ? '+ guests' : ' guests');
                                
                                // Find a good place to insert the warning
                                const insertPoint = venueCard.querySelector('.mt-4') || venueCard.querySelector('.mt-3');
                                if (insertPoint) {
                                    insertPoint.before(warningEl);
                                }
                            }
                        } else {
                            // Enable this venue
                            venueCard.classList.remove('opacity-50');
                            if (selectButton) {
                                selectButton.disabled = false;
                                selectButton.classList.remove('bg-gray-400', 'cursor-not-allowed');
                                selectButton.classList.add('bg-blue-600', 'hover:bg-blue-700');
                                selectButton.innerHTML = 'Select Venue';
                            }
                            
                            // Remove any existing warning
                            const warningEl = venueCard.querySelector('.capacity-warning');
                            if (warningEl) {
                                warningEl.remove();
                            }
                        }
                        
                        // Update capacity display to highlight if close to limit
                        if (capacityInfo) {
                            if (guestValue > venue.capacity.max * 0.9 && guestValue <= venue.capacity.max) {
                                capacityInfo.classList.add('text-amber-600', 'font-semibold');
                            } else {
                                capacityInfo.classList.remove('text-amber-600', 'font-semibold');
                            }
                        }
                    });
                    
                    // If the selected venue can't support the guest count, unselect it
                    if (selectedVenueKey && venueData[selectedVenueKey]) {
                        if (guestValue > venueData[selectedVenueKey].capacity.max) {
                            // Clear selection if capacity exceeded
                            document.querySelectorAll('.venue-card').forEach(card => {
                                card.classList.remove('border-2', 'border-blue-500');
                            });
                            
                            // Hide selected venue confirmation
                            const selectedVenueSection = document.getElementById('selected-venue-section');
                            if (selectedVenueSection) {
                                selectedVenueSection.classList.add('hidden');
                            }
                            
                            // Clear selected venue key
                            selectedVenueKey = null;
                        }
                    }
                }
            }

            // Budget slider functionality
            const budgetSlider = document.getElementById('budget-slider');
            const budgetDisplay = document.getElementById('budget-display');
            
            if (budgetSlider && budgetDisplay) {
                // Initialize with the default value
                updateBudgetDisplay(budgetSlider.value);
                
                // Update when the slider is moved
                budgetSlider.addEventListener('input', function() {
                    updateBudgetDisplay(this.value);
                    updateTotalCost();
                });
                
                // Function to format and display the budget
                function updateBudgetDisplay(value) {
                    // Convert to number and format with commas
                    const numValue = parseInt(value);
                    
                    // Format with commas and handle the maximum case
                    if (numValue >= 500) {
                        budgetDisplay.textContent = '$500+ per person';
                    } else {
                        budgetDisplay.textContent = '$' + numValue + ' per person';
                    }
                    
                    // Change color based on the value range
                    if (numValue < 50) {
                        budgetDisplay.className = 'text-lg font-semibold text-green-600';
                    } else if (numValue < 150) {
                        budgetDisplay.className = 'text-lg font-semibold text-blue-600';
                    } else {
                        budgetDisplay.className = 'text-lg font-semibold text-purple-600';
                    }
                }
            }

            // Total cost calculation
            const totalCostDisplay = document.getElementById('total-cost-display');
            
            function updateTotalCost() {
                if (!guestCountSlider || !budgetSlider || !totalCostDisplay) return;
                
                const guestCount = parseInt(guestCountSlider.value);
                const perPersonBudget = parseInt(budgetSlider.value);
                
                // Calculate total cost
                const totalCost = guestCount * perPersonBudget;
                
                // Format with commas for better readability
                totalCostDisplay.textContent = '$' + totalCost.toLocaleString();
                
                // Update color based on total cost amount
                if (totalCost < 5000) {
                    totalCostDisplay.className = 'text-xl font-bold text-green-700';
                } else if (totalCost < 25000) {
                    totalCostDisplay.className = 'text-xl font-bold text-blue-700';
                } else {
                    totalCostDisplay.className = 'text-xl font-bold text-purple-700';
                }
            }
            
            // Initialize total cost display
            updateTotalCost();

            // Form submission
            document.getElementById('booking-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Validate terms agreement
                const termsAgreement = document.getElementById('terms-agreement').checked;
                if (!termsAgreement) {
                    alert('Please agree to the terms before submitting.');
                    return;
                }
                
                // In a real implementation, you would send the form data to your server/API here
                // For now, just show a success message
                alert('Thank you for your booking request! A representative will contact you shortly.');
                
                // Reset form for demonstration purposes
                this.reset();
                step3.classList.add('hidden');
                step1.classList.remove('hidden');
                
                step1Indicator.classList.remove('bg-green-500');
                step1Indicator.classList.add('bg-blue-600');
                step2Indicator.classList.remove('bg-green-500');
                step2Indicator.classList.add('bg-gray-300', 'text-gray-600');
                step3Indicator.classList.remove('bg-blue-600', 'text-white');
                step3Indicator.classList.add('bg-gray-300', 'text-gray-600');
                
                // Reset any conditionally shown fields
                document.getElementById('other-event-type-container').classList.add('hidden');
                document.getElementById('selected-venue-section').classList.add('hidden');
                
                // Reset sliders to default values
                if (budgetSlider) {
                    budgetSlider.value = 50;
                    updateBudgetDisplay(50);
                }
                
                if (guestCountSlider) {
                    guestCountSlider.value = 50;
                    updateGuestCountDisplay(50);
                    checkVenueCapacities(50);
                }
                
                // Clear venue selection
                document.querySelectorAll('.venue-card').forEach(card => {
                    card.classList.remove('border-2', 'border-blue-500');
                });
                selectedVenueKey = null;
                
                // Remove any selected venue input
                const venueInput = document.querySelector('input[name="selected-venue"]');
                if (venueInput) {
                    venueInput.remove();
                }
                
                // Reset external venue checkbox
                if (externalVenueCheckbox) {
                    externalVenueCheckbox.checked = false;
                    externalVenueContainer.classList.add('hidden');
                }
            });

            // Initialize photo gallery navigation for all venue cards
            initPhotoGalleries();
            
            // Service checkboxes "Select All" functionality
            const selectAllServices = document.getElementById('select-all-services');
            const serviceCheckboxes = document.querySelectorAll('.service-checkbox');
            
            if (selectAllServices && serviceCheckboxes.length > 0) {
                // When "Select All" is clicked
                selectAllServices.addEventListener('change', function() {
                    const isChecked = this.checked;
                    serviceCheckboxes.forEach(checkbox => {
                        checkbox.checked = isChecked;
                    });
                });
                
                // Update "Select All" checkbox when individual checkboxes change
                serviceCheckboxes.forEach(checkbox => {
                    checkbox.addEventListener('change', updateSelectAllCheckbox);
                });
                
                // Function to check if all service checkboxes are checked
                function updateSelectAllCheckbox() {
                    const allChecked = Array.from(serviceCheckboxes).every(checkbox => checkbox.checked);
                    const anyChecked = Array.from(serviceCheckboxes).some(checkbox => checkbox.checked);
                    
                    // Set the "Select All" checkbox state
                    selectAllServices.checked = allChecked;
                    
                    // Optional: Set indeterminate state if some but not all are checked
                    selectAllServices.indeterminate = anyChecked && !allChecked;
                }
            }

            // Initialize event length buttons
            const eventLengthButtons = document.querySelectorAll('.event-length-btn');
            const eventLengthSelect = document.getElementById('event-length');
            const eventLengthValue = document.getElementById('event-length-value');
            
            if (eventLengthButtons.length > 0 && eventLengthSelect && eventLengthValue) {
                // Handle button clicks
                eventLengthButtons.forEach(button => {
                    button.addEventListener('click', function() {
                        // Remove active class from all buttons
                        eventLengthButtons.forEach(btn => {
                            btn.classList.remove('bg-blue-500', 'text-white');
                            btn.classList.add('bg-gray-100', 'text-gray-700');
                        });
                        
                        // Add active class to clicked button
                        this.classList.remove('bg-gray-100', 'text-gray-700');
                        this.classList.add('bg-blue-500', 'text-white');
                        
                        // Update select to match button
                        const hours = this.dataset.hours;
                        eventLengthSelect.value = hours;
                        eventLengthValue.value = hours;
                    });
                });
                
                // Handle select changes
                eventLengthSelect.addEventListener('change', function() {
                    const selectedHours = this.value;
                    eventLengthValue.value = selectedHours;
                    
                    // Update buttons to match select
                    eventLengthButtons.forEach(btn => {
                        if (btn.dataset.hours === selectedHours) {
                            btn.classList.remove('bg-gray-100', 'text-gray-700');
                            btn.classList.add('bg-blue-500', 'text-white');
                        } else {
                            btn.classList.remove('bg-blue-500', 'text-white');
                            btn.classList.add('bg-gray-100', 'text-gray-700');
                        }
                    });
                });
            }

            // Summary bar functionality
            const summaryBar = document.getElementById('summary-bar');
            const summaryOrganizerEl = document.getElementById('summary-organizer');
            const summaryEventDetailsEl = document.getElementById('summary-event-details');
            const summaryDatetimeEl = document.getElementById('summary-datetime');
            const summaryGuestsVenueEl = document.getElementById('summary-guests-venue');
            
            // Update summary when inputs change
            function updateSummary() {
                // Get current step
                const currentStep = document.getElementById('step-1').classList.contains('hidden') ?
                    (document.getElementById('step-2').classList.contains('hidden') ? 3 : 2) : 1;
                
                // Initialize venue variables at function scope
                let venueName = '';
                let venueKey = null;
                
                // Organizer information
                const firstName = document.getElementById('first-name')?.value || '';
                const lastName = document.getElementById('last-name')?.value || '';
                const company = document.getElementById('company')?.value || '';
                
                if (firstName || company) {
                    summaryOrganizerEl.classList.remove('hidden');
                    const organizerName = company || (firstName + (lastName ? ' ' + lastName : ''));
                    summaryOrganizerEl.querySelector('span').textContent = organizerName;
                } else {
                    summaryOrganizerEl.classList.add('hidden');
                }
                
                // Event details
                const eventType = document.getElementById('event-type')?.value || '';
                const eventName = document.getElementById('event-name')?.value || '';
                // Get event type text from the selected card instead of looking for a select option
                let eventTypeText = '';
                if (eventType) {
                    const selectedCard = document.querySelector(`.event-type-card[data-value="${eventType}"]`);
                    if (selectedCard) {
                        eventTypeText = selectedCard.querySelector('.font-medium').textContent;
                    } else if (eventType === 'other') {
                        // For "Other" event type, check if there's a value in the other-event-type input
                        const otherEventType = document.getElementById('other-event-type')?.value;
                        eventTypeText = otherEventType || 'Other';
                    }
                }
                
                if (eventType || eventName) {
                    summaryEventDetailsEl.classList.remove('hidden');
                    summaryEventDetailsEl.querySelector('.event-type').textContent = eventTypeText ? eventTypeText + ' ' : '';
                    
                    const nameDisplay = eventName ? ('"' + eventName + '"') : '';
                    summaryEventDetailsEl.querySelector('.event-name').textContent = nameDisplay;
                } else {
                    summaryEventDetailsEl.classList.add('hidden');
                }
                
                // Date and time
                const eventDate = document.getElementById('event-date')?.value || '';
                const startTime = document.getElementById('start-time')?.value || '';
                const eventLength = document.getElementById('event-length-value')?.value || '';
                
                if (eventDate || startTime || eventLength) {
                    summaryDatetimeEl.classList.remove('hidden');
                    
                    const dateDisplay = eventDate ? new Date(eventDate).toLocaleDateString('en-US', { weekday: 'short', month: 'short', day: 'numeric' }) : 'TBD';
                    summaryDatetimeEl.querySelector('.event-date').textContent = dateDisplay;
                    
                    summaryDatetimeEl.querySelector('.start-time').textContent = startTime || 'TBD';
                    
                    const lengthDisplay = eventLength ? (eventLength + (eventLength === '1' ? ' hour' : ' hours')) : 'TBD';
                    summaryDatetimeEl.querySelector('.event-duration').textContent = lengthDisplay;
                } else {
                    summaryDatetimeEl.classList.add('hidden');
                }
                
                // Only show guests and venue on step 2+
                if (currentStep >= 2) {
                    // Guests and venue
                    const guestCount = document.getElementById('guest-count-slider')?.value || '';
                    const maxGuests = document.getElementById('guest-count-slider')?.max || '';
                    const isMaxGuests = guestCount >= maxGuests;
                    
                    // Use the global venue variables as the primary source
                    if (selectedVenueKey && selectedVenueName) {
                        venueKey = selectedVenueKey;
                        venueName = selectedVenueName;
                    } else {
                        // Fallback methods if global variables aren't set for some reason
                        
                        // Method 1: Check for hidden input
                        const venueInput = document.querySelector('input[name="selected-venue"]');
                        venueKey = venueInput ? venueInput.value : null;
                        
                        // Method 2: Check if venue details are visible (indicating selection)
                        if (!venueKey && !document.getElementById('selected-venue-section').classList.contains('hidden')) {
                            const venueDetailsText = document.getElementById('selected-venue-details').textContent;
                            
                            // Try to find which venue matches this text
                            Object.keys(venueData).forEach(key => {
                                if (venueDetailsText.includes(venueData[key].name)) {
                                    venueKey = key;
                                }
                            });
                        }
                        
                        // Get venue name if we found a key
                        if (venueKey && venueData[venueKey]) {
                            venueName = venueData[venueKey].name;
                        }
                        
                        // Check if there's a selected venue visually (backup method)
                        if (!venueName) {
                            const selectedVenueTitle = document.querySelector('#selected-venue-details h4');
                            if (selectedVenueTitle) {
                                venueName = selectedVenueTitle.textContent.trim();
                            }
                        }
                    }
                    
                    if (guestCount) {
                        summaryGuestsVenueEl.classList.remove('hidden');
                        
                        const guestDisplay = guestCount + (isMaxGuests ? '+ guests' : ' guests');
                        summaryGuestsVenueEl.querySelector('.guest-count').textContent = guestDisplay;
                        
                        // If we found a venue name, display it, otherwise TBD
                        if (venueName) {
                            summaryGuestsVenueEl.querySelector('.venue-name').textContent = venueName;
                        } else {
                            // Check if the selected venue section is visible
                            const selectedVenueVisible = !document.getElementById('selected-venue-section').classList.contains('hidden');
                            
                            if (selectedVenueVisible) {
                                // Try to extract venue name from the displayed content
                                const venueHeading = document.querySelector('#selected-venue-details h4');
                                if (venueHeading) {
                                    summaryGuestsVenueEl.querySelector('.venue-name').textContent = venueHeading.textContent.trim();
                                } else {
                                    summaryGuestsVenueEl.querySelector('.venue-name').textContent = 'venue TBD';
                                }
                            } else {
                                summaryGuestsVenueEl.querySelector('.venue-name').textContent = 'venue TBD';
                            }
                        }
                    } else {
                        summaryGuestsVenueEl.classList.add('hidden');
                    }
                } else {
                    // Hide guest count on step 1
                    summaryGuestsVenueEl.classList.add('hidden');
                }
                
                // Log info about the venue selection only when we're on step 2+
                if (currentStep >= 2) {
                    console.log('Summary updated - Selected venue:', (venueName || 'None'), 'Venue Key:', (venueKey || 'None'));
                } else {
                    console.log('Summary updated - On step 1, venue info not shown yet');
                }
            }
            
            // Add listeners to update the summary when form inputs change
            document.querySelectorAll('input, select, textarea').forEach(element => {
                element.addEventListener('change', updateSummary);
                element.addEventListener('input', updateSummary);
            });
            
            // For the guest count slider
            if (document.getElementById('guest-count-slider')) {
                document.getElementById('guest-count-slider').addEventListener('input', updateSummary);
            }
            
            // For event length buttons
            document.querySelectorAll('.event-length-btn').forEach(btn => {
                btn.addEventListener('click', updateSummary);
            });
            
            // Also update summary when venue is selected
            const originalSelectVenue = selectVenue;
            if (typeof selectVenue === 'function') {
                selectVenue = function(venueKey) {
                    console.log('VENUE SELECT START - Selected:', venueKey);
                    originalSelectVenue(venueKey);
                    
                    // Always update the summary bar immediately with venue name
                    if (summaryGuestsVenueEl) {
                        const venueNameEl = summaryGuestsVenueEl.querySelector('.venue-name');
                        if (venueNameEl && selectedVenueName) {
                            console.log('DIRECT UPDATE - Setting venue name to:', selectedVenueName);
                            venueNameEl.textContent = selectedVenueName;
                            
                            // Make sure the section is visible
                            if (summaryGuestsVenueEl.classList.contains('hidden')) {
                                const guestCount = document.getElementById('guest-count-slider')?.value || '';
                                if (guestCount) {
                                    summaryGuestsVenueEl.classList.remove('hidden');
                                }
                            }
                        } else {
                            console.log('DIRECT UPDATE FAILED - venueNameEl not found or selectedVenueName not set');
                        }
                    } else {
                        console.log('DIRECT UPDATE SKIPPED - summaryGuestsVenueEl not found');
                    }
                    
                    // Force full summary update with a delay
                    console.log('SCHEDULING delayed summary update');
                    setTimeout(() => {
                        console.log('DELAYED UPDATE starting');
                        updateSummary();
                    }, 100);
                };
            }
            
            // Add debug info to updateSummary function
            const originalUpdateSummary = updateSummary;
            updateSummary = function() {
                console.log('UPDATE SUMMARY starting');
                originalUpdateSummary();
                console.log('UPDATE SUMMARY completed');
            };
            
            // Initial summary update
            updateSummary();

            // Initialize the background system
            initializeBackgroundSystem();
        });

        // Function to initialize photo galleries for all venue cards
        function initPhotoGalleries() {
            // Add click handlers for gallery navigation buttons
            document.querySelectorAll('.gallery-nav').forEach(navButton => {
                navButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const gallery = this.closest('.venue-photo-gallery');
                    const venueKey = gallery.dataset.venue;
                    const action = this.dataset.action;
                    const currentIndex = parseInt(gallery.querySelector('.venue-photo.active').dataset.index);
                    const totalPhotos = venueData[venueKey].photos.length;
                    
                    let newIndex;
                    if (action === 'next') {
                        newIndex = (currentIndex + 1) % totalPhotos;
                    } else {
                        newIndex = (currentIndex - 1 + totalPhotos) % totalPhotos;
                    }
                    
                    changePhoto(gallery, newIndex);
                });
            });
            
            // Add click handlers for gallery indicators
            document.querySelectorAll('.gallery-indicator').forEach(indicator => {
                indicator.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const gallery = this.closest('.venue-photo-gallery');
                    const newIndex = parseInt(this.dataset.index);
                    
                    changePhoto(gallery, newIndex);
                });
            });
        }
        
        // Function to change the active photo in a gallery
        function changePhoto(gallery, newIndex) {
            // Update photos
            gallery.querySelectorAll('.venue-photo').forEach(photo => {
                photo.classList.remove('active');
            });
            gallery.querySelector(`.venue-photo[data-index="${newIndex}"]`).classList.add('active');
            
            // Update indicators
            gallery.querySelectorAll('.gallery-indicator').forEach(indicator => {
                indicator.classList.remove('active');
            });
            gallery.querySelector(`.gallery-indicator[data-index="${newIndex}"]`).classList.add('active');
        }

        // Function to process venue photos and filter out non-existent ones
        function processVenuePhotos() {
            // For each venue, check if the photos exist
            Object.keys(venueData).forEach(venueKey => {
                const venue = venueData[venueKey];
                
                // Skip processing if no photos defined
                if (!venue.photos || venue.photos.length === 0) {
                    venue.photos = ["assets/venues/placeholder.png"];
                    return;
                }
                
                // Keep the original photos array
                const originalPhotos = [...venue.photos];
                
                // Flag to track if any image has loaded successfully
                let hasLoadedImage = false;
                
                // Check each photo
                originalPhotos.forEach((photoUrl, index) => {
                    if (photoUrl) {
                        // Create a temporary image to check if it loads
                        const img = new Image();
                        
                        img.onload = function() {
                            // Mark that we have at least one valid image
                            hasLoadedImage = true;
                        };
                        
                        img.onerror = function() {
                            // If it fails to load, log the error
                            console.log(`Photo not found: ${photoUrl}`);
                            
                            // If this was the only photo and it failed, use placeholder
                            if (originalPhotos.length === 1 && !hasLoadedImage) {
                                venue.photos = ["assets/venues/placeholder.png"];
                            }
                        };
                        
                        // Start loading the image
                        img.src = photoUrl;
                    }
                });
            });
        }

        // Update document for the changes
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Escape') {
                closeModal();
            }
        });
        
     
      

        // Event Type Card Selection
        const eventTypeCards = document.querySelectorAll('.event-type-card');
        const eventTypeInput = document.getElementById('event-type');
        const otherEventTypeContainer = document.getElementById('other-event-type-container');
        const otherEventTypeInput = document.getElementById('other-event-type');
        
        eventTypeCards.forEach(card => {
            card.addEventListener('click', function() {
                // Remove active class from all cards
                eventTypeCards.forEach(c => {
                    c.classList.remove('bg-blue-50', 'border-blue-500');
                    c.classList.add('border');
                });
                
                // Add active class to selected card
                this.classList.add('bg-blue-50', 'border-blue-500');
                
                // Update hidden input value
                const selectedValue = this.dataset.value;
                eventTypeInput.value = selectedValue;
                
                // Trigger change event for the hidden input
                const changeEvent = new Event('change', { bubbles: true });
                eventTypeInput.dispatchEvent(changeEvent);
                
                // Show/hide Other field
                if (selectedValue === 'other') {
                    otherEventTypeContainer.classList.remove('hidden');
                } else {
                    otherEventTypeContainer.classList.add('hidden');
                }
                
                // Update summary
                updateSummary();
            });
        });
        
        // Add event listener for the "other" event type input to update summary when it changes
        if (otherEventTypeInput) {
            otherEventTypeInput.addEventListener('input', function() {
                updateSummary();
            });
        }
        
        // Auto-save functionality
        const autoSaveToggle = document.getElementById('auto-save');
        
        // Function to handle auto-save state changes
        function handleAutoSaveToggle() {
            const isAutoSaveEnabled = autoSaveToggle.checked;
            console.log('Auto-save ' + (isAutoSaveEnabled ? 'enabled' : 'disabled'));
            
            // Store the preference in localStorage
            localStorage.setItem('auto-save-enabled', isAutoSaveEnabled);
            
            // Additional logic for enabling/disabling auto-save functionality can be added here
        }
        
        // Initialize auto-save state from localStorage (if available)
        if (localStorage.getItem('auto-save-enabled') !== null) {
            autoSaveToggle.checked = localStorage.getItem('auto-save-enabled') === 'true';
        }
        
        // Set up event listener for the toggle
        autoSaveToggle.addEventListener('change', handleAutoSaveToggle);
        
        // Initial handling of auto-save state
        handleAutoSaveToggle();

        // Background System Functions
        function initializeBackgroundSystem() {
            console.log('🖼️ Background system initializing');
            // Initialize with empty background
            updateBackgroundSystem();
            
            // Listen for venue selection changes
            document.querySelectorAll('.venue-card').forEach(card => {
                card.addEventListener('click', function() {
                    // Update background based on selected venue
                    updateBackgroundSystem();
                });
            });
            console.log('🖼️ Background system initialized and listeners attached');
        }
        
        function updateBackgroundSystem() {
            console.log('🖼️ Updating background system');
            // Clear existing background items and timer
            clearBackgroundSystem();
            
            // If no venue is selected, use all photos from all venues
            if (!selectedVenueKey || !venueData[selectedVenueKey]) {
                console.log('🖼️ No venue selected, using photos from all venues');
                
                // Collect photos from all venues
                const allPhotos = [];
                Object.keys(venueData).forEach(key => {
                    if (venueData[key].photos && venueData[key].photos.length > 0) {
                        allPhotos.push(...venueData[key].photos);
                    }
                });
                
                if (allPhotos.length === 0) {
                    console.log('🖼️ No photos available in any venue');
                    return;
                }
                
                console.log(`🖼️ Found ${allPhotos.length} backgrounds across all venues`);
                backgroundItems = allPhotos;
            } else {
                // Get photos array from selected venue
                const photos = venueData[selectedVenueKey].photos || [];
                
                // If no photos, return
                if (photos.length === 0) {
                    console.log('🖼️ No photos available for selected venue');
                    return;
                }
                
                console.log(`🖼️ Found ${photos.length} backgrounds for venue: ${selectedVenueName}`);
                // Reset background items array
                backgroundItems = photos;
            }
            
            // Randomize the starting index
            currentBackgroundIndex = Math.floor(Math.random() * backgroundItems.length);
            console.log(`🖼️ Starting with random index: ${currentBackgroundIndex}`);
            
            // Start cycling through backgrounds
            startBackgroundCycle();
        }
        
        function clearBackgroundSystem() {
            console.log('🖼️ Clearing background system');
            // Clear the timer
            if (backgroundTimer) {
                clearTimeout(backgroundTimer);
                backgroundTimer = null;
                console.log('🖼️ Background timer cleared');
            }
            
            // Remove all background items
            const container = document.getElementById('background-container');
            const existingItems = container.querySelectorAll('.background-item');
            console.log(`🖼️ Removing ${existingItems.length} existing background items`);
            existingItems.forEach(item => item.remove());
            
            // Reset counter
            currentBackgroundIndex = 0;
            backgroundItems = [];
            isVideoPlaying = false;
            console.log('🖼️ Background system reset');
        }
        
        function startBackgroundCycle() {
            console.log('🖼️ Starting background cycle');
            // If no items, return
            if (backgroundItems.length === 0) {
                console.log('🖼️ No background items to cycle through');
                return;
            }
            
            // Get the container
            const container = document.getElementById('background-container');
            
            // Create the first background item
            showNextBackground(container);
        }
        
        function showNextBackground(container) {
            // Get the current item URL
            const itemUrl = backgroundItems[currentBackgroundIndex];
            console.log(`🖼️ Showing background ${currentBackgroundIndex + 1}/${backgroundItems.length}: ${itemUrl}`);
            
            // Determine if it's a video or image based on extension
            const isVideo = itemUrl.match(/\.(mp4|webm|ogg)$/i);
            
            // Create the element
            let element;
            if (isVideo) {
                console.log(`🖼️ Creating video element for: ${itemUrl}`);
                element = document.createElement('video');
                element.autoplay = true;
                element.muted = true;
                element.loop = false;
                element.playsInline = true;
                
                // When video ends, show next background
                element.onended = function() {
                    console.log('🖼️ Video playback ended');
                    isVideoPlaying = false;
                    fadeOutCurrentBackground(element);
                    goToNextBackground(container);
                };
                
                // Set video playing flag
                isVideoPlaying = true;
                
                // Add source
                const source = document.createElement('source');
                source.src = itemUrl;
                source.type = `video/${itemUrl.split('.').pop()}`;
                element.appendChild(source);
            } else {
                console.log(`🖼️ Creating image element for: ${itemUrl}`);
                element = document.createElement('img');
                element.src = itemUrl;
                
                // For images, set a timer to move to the next item
                const randomDuration = Math.floor(Math.random() * 3000) + 5000; // Random between 5-8 seconds
                console.log(`🖼️ Setting image duration timer for ${randomDuration}ms`);
                backgroundTimer = setTimeout(() => {
                    fadeOutCurrentBackground(element);
                    goToNextBackground(container);
                }, randomDuration);
            }
            
            // Add common attributes
            element.classList.add('background-item');
            
            // Add to container
            container.appendChild(element);
            
            // Fade it in after a small delay
            setTimeout(() => {
                element.style.opacity = '1';
                console.log('🖼️ Fading in background');
            }, 50);
        }
        
        function fadeOutCurrentBackground(element) {
            console.log('🖼️ Fading out current background');
            // Fade out the current element
            element.style.opacity = '0';
            
            // Remove it after transition completes
            setTimeout(() => {
                element.remove();
                console.log('🖼️ Background element removed from DOM');
            }, 1500); // Match the CSS transition duration
        }
        
        function goToNextBackground(container) {
            // Pick a random index different from the current one
            let newIndex;
            if (backgroundItems.length > 1) {
                do {
                    newIndex = Math.floor(Math.random() * backgroundItems.length);
                } while (newIndex === currentBackgroundIndex);
                currentBackgroundIndex = newIndex;
            } else {
                currentBackgroundIndex = 0;
            }
            
            console.log(`🖼️ Randomly selected next background (index: ${currentBackgroundIndex})`);
            
            // Show the next background
            showNextBackground(container);
        }

        // Initial handling of auto-save state
        handleAutoSaveToggle();
    </script>
</body>
</html>
